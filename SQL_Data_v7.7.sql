--DROP TABLES--

DROP TABLE STUDENT;
DROP TABLE TEACHER;
DROP TABLE SUBJECT;
DROP TABLE QUESTION;
DROP TABLE EXAM_PAPER;
DROP TABLE STUDENT_REPORT;
DROP TABLE CLASS;
DROP TABLE EXAMPAPER_QUESTIONS;
DROP TABLE BATCH;
DROP TABLE STUDENT_EXAM_SCORE;
DROP TABLE STUDENT_SUBJECT_REPORT;
DROP TABLE EXAM;
DROP TABLE STUDENT_ANSWER;
DROP TABLE STUDENT_SUBJECT_OVERALL_GRADE;


--CREATE TABLES--

CREATE TABLE STUDENT (STUDENT_ID VARCHAR(9) NOT NULL, STUDENT_NAME VARCHAR(30), CLASS_ID VARCHAR(15), EMAIL VARCHAR(30), PASSWORD VARCHAR(30), CONSTRAINT student_pk PRIMARY KEY(STUDENT_ID));

CREATE TABLE TEACHER (STAFF_ID VARCHAR(9) NOT NULL, STAFF_NAME VARCHAR(30), EMAIL VARCHAR(30), PASSWORD VARCHAR(30),CONSTRAINT teacher_pk PRIMARY KEY(STAFF_ID));

CREATE TABLE CLASS (CLASS_ID VARCHAR(15) NOT NULL, CLASS_NAME VARCHAR(255), STAFF_ID VARCHAR(9) NOT NULL);


CREATE TABLE SUBJECT (SUBJECT_ID VARCHAR(12) NOT NULL, SUBJECT_NAME VARCHAR(50), CLASS_ID VARCHAR(15), CONSTRAINT subject_pk PRIMARY KEY(SUBJECT_ID));

CREATE TABLE SUBJECT_TEACHER(SUBJECT_ID VARCHAR(12) NOT NULL, STAFF_ID VARCHAR(9) NOT NULL, CONSTRAINT fk_subject FOREIGN KEY(SUBJECT_ID) REFERENCES SUBJECT(SUBJECT_ID), CONSTRAINT fk_staff FOREIGN KEY(STAFF_ID) REFERENCES TEACHER(STAFF_ID));

CREATE TABLE EXAM (EXAM_ID VARCHAR(16) NOT NULL, SUBJECT_ID VARCHAR(12) NOT NULL, DAY VARCHAR(10), START_TIME VARCHAR(5), DURATION VARCHAR(5), EXAM_MAX_SCORE NUMBER(5),CONSTRAINT exam_pk PRIMARY KEY (EXAM_ID),CONSTRAINT tested_by_subject FOREIGN KEY (SUBJECT_ID) REFERENCES SUBJECT (SUBJECT_ID));

CREATE TABLE EXAM_PAPER (PAPER_ID VARCHAR(10) NOT NULL, STUDENT_ID VARCHAR(9) NOT NULL, EXAM_ID VARCHAR(16) NOT NULL, SUBJECT_ID VARCHAR(12) NOT NULL, STUDENT_EXAM_SCORE NUMBER(5), TEACHER_FINISHED_GRADING NUMBER(1), CONSTRAINT exam_paper_pk PRIMARY KEY (PAPER_ID), CONSTRAINT fk_student FOREIGN KEY(STUDENT_ID) REFERENCES STUDENT(STUDENT_ID), CONSTRAINT fk_exam FOREIGN KEY(EXAM_ID) REFERENCES EXAM(EXAM_ID), CONSTRAINT fk_subject_ FOREIGN KEY(SUBJECT_ID) REFERENCES SUBJECT(SUBJECT_ID));

CREATE TABLE QUESTION (QUESTION_ID VARCHAR(10) NOT NULL,EXAM_ID VARCHAR(16) NOT NULL,QUESTION_TYPE VARCHAR(5), CONTENT VARCHAR(255), GRAPHICS VARCHAR(5), AUDIO VARCHAR(5), CORRECT_ANS VARCHAR(255), SCORE NUMBER(5), ISCOMPULSORY VARCHAR(5), QUESTION_MAX_SCORE NUMBER(5),CONSTRAINT question_pk PRIMARY KEY (QUESTION_ID),CONSTRAINT part_of FOREIGN KEY (EXAM_ID) REFERENCES EXAM (EXAM_ID));


CREATE TABLE STUDENT_ANSWER (STUDENT_ID VARCHAR(9) NOT NULL, QUESTION_ID VARCHAR(10) NOT NULL, ANSWER VARCHAR(255),ALREADY_MARKED NUMBER(1),STUDENT_ANSWER_SCORE NUMBER(5),CONSTRAINT answer_by_student_for_question PRIMARY KEY (STUDENT_ID, QUESTION_ID));


--ADD DATA TO STUDENT--

INSERT INTO STUDENT VALUES('17616265d', 'JOHN', 'CLASS_A', '17616265d@mail.com', 'pwd001');
INSERT INTO STUDENT VALUES('17354345d', 'EDWARD', 'CLASS_B', '17354345d@mail.com', 'pwd002');
INSERT INTO STUDENT VALUES('17512512d', 'OLIVIA', 'CLASS_C', '17512512d@mail.com', 'pwd003');
INSERT INTO STUDENT VALUES('17512513d', 'MANDY', 'CLASS_D', '17512513d@mail.com', 'pwd004');
INSERT INTO STUDENT VALUES('17523233d', 'ANDY', 'CLASS_E', '17523233d@mail.com', 'pwd004');
INSERT INTO STUDENT VALUES('17512413d', 'TOM', 'CLASS_D', '17512413d@mail.com', 'pwd004');
INSERT INTO STUDENT VALUES('17522513d', 'TOMMY', 'CLASS_D', '17522513d@mail.com', 'pwd004');
INSERT INTO STUDENT VALUES('12512513d', 'ANDY', 'CLASS_F', '12512513d@mail.com', 'pwd034');

--ADD DATA TO TEACHER--

INSERT INTO TEACHER VALUES('16213218x', 'DENNIS', '16213218x@mail.com', 'pwd004');
INSERT INTO TEACHER VALUES('18545424x', 'VINCENT', '18545424x@mail.com', 'pwd005');
INSERT INTO TEACHER VALUES('17542544x', 'TIM', '17542544x@mail.com', 'pwd006');
INSERT INTO TEACHER VALUES('17542554x', 'TOM', '17542554x@mail.com', 'pwd007');
INSERT INTO TEACHER VALUES('19642544x', 'ALEX', '19642544x@mail.com', 'pwd008');

--ADD DATA TO CLASS--

INSERT INTO CLASS VALUES('CLASS_A', 'HIGHSCHOOL CLASS A','16213218x');
INSERT INTO CLASS VALUES('CLASS_B', 'HIGHSCHOOL CLASS B','18545424x');
INSERT INTO CLASS VALUES('CLASS_C', 'HIGHSCHOOL CLASS C','17542544x');
INSERT INTO CLASS VALUES('CLASS_D', 'HIGHSCHOOL CLASS D','17542554x');
INSERT INTO CLASS VALUES('CLASS_F', 'HIGHSCHOOL CLASS F','19642544x');

--ADD DATA TO SUBJECT--

INSERT INTO SUBJECT VALUES('PHYSICS_A', 'CLASS A PHYSICS','CLASS_A');
INSERT INTO SUBJECT VALUES('PHYSICS_B', 'CLASS B PHYSICS','CLASS_B');
INSERT INTO SUBJECT VALUES('MATHS_A', 'CLASS A MATHS','CLASS_A');
INSERT INTO SUBJECT VALUES('ENGLISH_C', 'CLASS C ENGLISH','CLASS_C');
INSERT INTO SUBJECT VALUES('ENGLISH_F', 'CLASS F ENGLISH','CLASS_F');
INSERT INTO SUBJECT VALUES('EMP_D', 'EMPTY COURSE','');

--ADD DATA TO SUBJECT_TEACHER--

INSERT INTO SUBJECT_TEACHER VALUES('PHYSICS_A', '16213218x');
INSERT INTO SUBJECT_TEACHER VALUES('PHYSICS_B', '18545424x');
INSERT INTO SUBJECT_TEACHER VALUES('MATHS_A', '17542544x');
INSERT INTO SUBJECT_TEACHER VALUES('ENGLISH_C', '17542554x');
INSERT INTO SUBJECT_TEACHER VALUES('ENGLISH_F', '19642544x');

--ADD DATA TO EXAM--

INSERT INTO EXAM VALUES('CLASSA_EXAM001', 'PHYSICS_A', '2020-12-12', '15:00', '02:00', 100);
INSERT INTO EXAM VALUES('CLASSB_EXAM001', 'PHYSICS_B', '2020-12-13', '12:00', '02:00', 100);
INSERT INTO EXAM VALUES('CLASSC_EXAM001', 'ENGLISH_C', '2020-12-10', '12:25', '02:00', 100);

--ADD DATA TO EXAM_PAPER--

INSERT INTO EXAM_PAPER VALUES('A01', '17616265d', 'CLASSA_EXAM001', 'PHYSICS_A', 0, 0);
INSERT INTO EXAM_PAPER VALUES('B01', '17354345d', 'CLASSB_EXAM001', 'PHYSICS_B', 0, 0);
INSERT INTO EXAM_PAPER VALUES('C01', '17512512d', 'CLASSC_EXAM001', 'ENGLISH_C', 0, 0);

--ADD DATA TO QUESTION--

INSERT INTO QUESTION(QUESTION_ID, EXAM_ID, QUESTION_TYPE, CONTENT, CORRECT_ANS, SCORE, ISCOMPULSORY) VALUES('1', 'CLASSA_EXAM001', 'MC', '1+1=?\nA.2\nB.3\nC.11\nD.10', 'A', 2, 'TRUE');
INSERT INTO QUESTION(QUESTION_ID, EXAM_ID, QUESTION_TYPE, CONTENT, CORRECT_ANS, SCORE, ISCOMPULSORY) VALUES('2', 'CLASSA_EXAM001', 'FITB', 'He __ a boy.', 'is', 2, 'TRUE');
INSERT INTO QUESTION(QUESTION_ID, EXAM_ID, QUESTION_TYPE, CONTENT, CORRECT_ANS, SCORE, ISCOMPULSORY) VALUES('3', 'CLASSA_EXAM001', 'SFTQ', 'What is dbms?', 'dbms', 2, 'TRUE');
INSERT INTO QUESTION(QUESTION_ID, EXAM_ID, QUESTION_TYPE, CONTENT, CORRECT_ANS, SCORE, ISCOMPULSORY) VALUES('4', 'CLASSB_EXAM001', 'MC', '2+1=?\nA.2\nB.3\nC.11\nD.10', 'B', 2, 'FALSE');
INSERT INTO QUESTION(QUESTION_ID, EXAM_ID, QUESTION_TYPE, CONTENT, CORRECT_ANS, SCORE, ISCOMPULSORY) VALUES('5', 'CLASSB_EXAM001', 'FITB', 'She __ a girl.', 'is', 2, 'FALSE');
INSERT INTO QUESTION(QUESTION_ID, EXAM_ID, QUESTION_TYPE, CONTENT, CORRECT_ANS, SCORE, ISCOMPULSORY) VALUES('6', 'CLASSC_EXAM001', 'SFTQ', 'What is comm?', 'comm', 2, 'FALSE');
INSERT INTO QUESTION(QUESTION_ID, EXAM_ID, QUESTION_TYPE, CONTENT, CORRECT_ANS, SCORE, ISCOMPULSORY) VALUES('7', 'CLASSC_EXAM001', 'SFTQ', 'Empty?', 'not', 3, 'TRUE');


--COMMIT--

COMMIT;

